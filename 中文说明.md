# WebClicker（本地运行中文说明）

本项目是一个浏览器端瞄准训练游戏。你可以用**纯静态服务器**运行（可玩、历史存在浏览器本地），也可以用项目自带的 **Node 后端 + SQLite** 运行（额外支持 `/api` 的历史同步/拉取）。

## 运行方式一（推荐）：Node 后端 + SQLite（支持 `/api`）

### 前置条件
- 已安装 **Node.js（建议 LTS）**，并确保 `node -v`、`npm -v` 在 PowerShell 可用。

### 启动步骤（PowerShell）
在项目根目录 `C:\CS2Dev\WebClicker` 执行：

```powershell
npm install
npm start
```

看到类似 `Server running on http://localhost:8000` 后，在浏览器打开：
- `http://localhost:8000`

### 数据存储位置
- 服务端会自动创建 `data\` 目录
- SQLite 数据库文件：`data\webclicker.db`

## 运行方式二（仅静态）：不启动 `server.js`

适合只想本地打开页面试玩、不需要服务端 `/api` 的情况。

### 方式 A：使用 `http-server`
在项目根目录执行：

```powershell
npx http-server -p 8000
```

然后打开：
- `http://localhost:8000`

### 方式 B：使用 Python（如果你装了 Python）
在项目根目录执行：

```powershell
python -m http.server 8000
```

然后打开：
- `http://localhost:8000`

> 注意：前端会尝试调用 `/api/session` 和 `/api/history/...`（用于 Steam64 绑定后的历史同步/拉取）。在纯静态服务器模式下，这些请求会失败，但代码已做了 `try/catch`，通常只会在控制台看到 warning，不影响基础游玩；历史记录仍会保存在浏览器 `localStorage`。

## 不建议的方式：直接双击打开 `index.html`

使用 `file://` 直接打开时，某些浏览器策略可能导致脚本/资源/请求行为异常。建议始终用上面任一“本地服务器”方式打开。

## 常见问题

### 1) 8000 端口被占用
- 关闭占用 8000 的进程，或改用其它端口（例如 8080）。
- 若使用本项目的 `server.js`，需要修改 `server.js` 最后一行的 `server.listen(8000, ...)` 中的端口号。

### 2) `npm install` 安装 `sqlite3` 失败
`sqlite3` 在少数 Windows 环境可能需要编译工具链。
- 优先尝试：升级到较新的 Node.js LTS 后重新 `npm install`
- 仍失败时：安装 **Visual Studio Build Tools（C++ 生成工具）** 与 **Python**，然后重试 `npm install`

